<!DOCTYPE html>
<html>

  <head>
    <link rel="stylesheet" href="layout.css">
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
  </head>
  <body>

    <!-- <div class="wrapper"></divclass>
      <div class="mainbody">
          <div class="colfeed"></div>
          <div class="colusers"></div>
          <div class="buttonPan"></div> -->
      </div>
    </div>
    <script>

      $(document).ready(function(){
        var $body = $('body');
        var $newsFeed = $('<div class=feed></div>');
        var $selUser= $('<div class=userfeed><p>Friend Feed</p></div>');
        $selUser.appendTo($body);
        $newsFeed.appendTo($body);
        // $body.html('');




// generate random tweets on open.
        var index = streams.home.length - 1;
        while(index >= 0){

            var tweet = streams.home[index];
            var time = streams.home[index];

          var $tweet = $('<div class="tweet"></div>');
          var $box = $('<div class="msgbox"></div>');
          var $user = $('<span class=user></span>');
          var $message =$('<span class=message></span>')

              // $tweet.text('@' + tweet.user + ': ' + tweet.message + ': ' +tweet.created_at);


            $tweet.appendTo($newsFeed);
            $user.addClass(tweet.user).attr('data-user', tweet.user).text('@' + tweet.user +' ').appendTo($tweet)

            $message.text(tweet.message + ' ' + tweet.created_at).appendTo($tweet);
          index -= 1;

        }



          //Generating button and New Tweet
        var $button = $("<input class='btnRef' type=button value=' New Tweet'>");
        $button.appendTo($body);
        $button.on('click', function () {
          generateRandomTweet();

       // Generattes new tweets.
            var tweet = streams.home.pop();
            // var newTweet = streams.home[index];


          var $ntweet = $('<div class="tweet"></div>');
          var $nmessage =$('<span class=message></span>')
          var $nuser = $('<span class=user></span>');

            //   $ntweet.text('@' + tweet.user + ': ' + tweet.message + ': ' +tweet.created_at);

            // $ntweet.appendTo($body);
            // $ntweet.appendTo($newsFeed);


            $ntweet.appendTo($newsFeed);
            $nuser.addClass(tweet.user).attr('data-user', tweet.user).text('@' + tweet.user +' ').appendTo($ntweet)
            $nmessage.text(tweet.message + ' ' + tweet.created_at).appendTo($ntweet)
        })



            //mouse event user highlight.


        $('.tweet' ).on("mouseover",".user", function( ) {
          event.preventDefault();
        $(this).css("background-color", "green");
          });

          $('.tweet').on("mouseout",".user", function( ) {

          $(this).css('background-color', 'white')
          });


        var $timeline = $('<div class=timeline></>');

          $('.tweet' ).on("click",".user", function( ) {
          event.preventDefault();
        var user = $(this).data('user');
        $timeline.appendTo($selUser)
        $('.tweet').not("div:contains('" + user + ")").show(100).appendTo($body)
        $("div:contains('" + user +"')").show(100).appendTo($selUser);;
        });







          //Generating button and New Tweet
          var $button = $("<input class='btnhome' type=button value=' Home Feed'>");
        $button.appendTo($body);
        $button.on('click', function () {

      })
      ('.tweet' ).on("mouseover",".user", function( ) {
          // event.preventDefault();
        $(this).css("background-color", "green");
          });

          $('.tweet').on("mouseout",".user", function( ) {
            // event.preventDefault();
          $(this).css('background-color', 'white')
          });



       });

      // });

    </script>
  </body>
</html>
