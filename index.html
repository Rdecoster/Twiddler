<!DOCTYPE html>
<html>

  <head>
    <link rel="stylesheet" href="layout.css">
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
  </head>
  <body>
      <h1 class="header">Ryan's Twiddler</h1>

      </div>
    </div>
    <script>

      $(document).ready(function(){
        var $body = $('body');
        var $newsFeed = $('<div class=feed></div>');
        $newsFeed.appendTo($body);
        // $body.html('');
        var $userFeed = $('<div class=ufeed></div>');
        $userFeed.appendTo($body);

        //function for my highlighter /Click listener / tweet slecter
        var highlighter =function(){

                  $('.tweet' ).on("mouseover",".user", function( ) {
                    event.preventDefault();
                  $(this).css("background-color", "green");
                    });

                    $('.tweet').on("mouseout",".user", function( ) {

                    $(this).css('background-color', 'white')
                    });


                    $('.tweet' ).on("click",".user", function( ) {
                    event.preventDefault();
                  var user = $(this).data('user');


                  $('.tweet').not("div:contains('" + user + ")").appendTo('.feed')
                  $("div:contains('" + user +"')").appendTo($userFeed)
                  $newsFeed.appendTo($body)
                  $button.appendTo('.header')
                  });

                      }



// generate random tweets on open.
        var index = streams.home.length - 1;
        while(index >= 0){

            var tweet = streams.home.pop();


          var $tweet = $('<div class="tweet"></div>');
          var $box = $('<div class="msgbox"></div>');
          var $user = $('<span class=user></span>');
          var $message =$('<span class=message></span>')
          var $timeStamp =$('<i class=tStamp></i>')

              // $tweet.text('@' + tweet.user + ': ' + tweet.message + ': ' +tweet.created_at);


            $tweet.appendTo($newsFeed);
            $user.addClass(tweet.user).attr('data-user', tweet.user).text('@' + tweet.user +' ').appendTo($tweet)

            $message.text(tweet.message).appendTo($tweet);
            $timeStamp.text(tweet.created_at).appendTo($tweet);
          index -= 1;

          highlighter();
        }



          //Generating button and New Tweet
        var $button = $("<input class='btnRef' type=button value=' New Tweet'>");
        $button.appendTo('.header');
        $button.on('click', function () {
          // generateRandomTweet();
          var index = streams.home.length ;
        while(index >= 0){
            //break my loop if their is no message in the streams.home
            if( streams.home[0] === undefined){
              break
            }
            console.log("loop still running")
        // Generattes new tweets.
              var tweet = streams.home.pop();
              // var tweet = generateRandomTweet()
              // var newTweet = streams.home[index];


            var $ntweet = $('<div class="tweet"></div>');
            var $nmessage =$('<span class=message></span>');
            var $nuser = $('<span class=user></span>');
            var $nTimeStamp =$('<i class=tStamp></i>');


              $ntweet.appendTo($newsFeed);
              $nuser.addClass(tweet.user).attr('data-user', tweet.user).text('@' + tweet.user +' ').appendTo($ntweet)
              $nmessage.text(tweet.message).appendTo($ntweet)
              $nTimeStamp.text(tweet.created_at).appendTo($ntweet);
          }
        highlighter();
        // $button.appendTo('.header')

        });


            //mouse event user highlight.

      //     //Generating button and New Tweet
      //     var $button = $("<input class='btnhome' type=button value=' Home Feed'>");
      //   $button.appendTo($body);
      //   $button.on('click', function () {

      // })
      // ('.tweet' ).on("mouseover",".user", function( ) {
      //     // event.preventDefault();
      //   $(this).css("background-color", "green");
      //     });

      //     $('.tweet').on("mouseout",".user", function( ) {
      //       // event.preventDefault();
      //     $(this).css('background-color', 'white')
      //     });



       });





    </script>
  </body>
</html>
